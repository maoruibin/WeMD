# ä¾§è¾¹æ åº•éƒ¨ä¿¡æ¯ æŠ€æœ¯è®¾è®¡

## ğŸ“‹ å…ƒä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **æ–‡æ¡£ç¼–å·** | TD-002 |
| **å…³è” PRD** | FEAT-002 |
| **ç¼–å†™æ—¥æœŸ** | 2024-01-13 |
| **è´Ÿè´£äºº** | @your-name |
| **å½“å‰çŠ¶æ€** | ğŸ“ è‰ç¨¿ |

---

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

### éœ€æ±‚å›é¡¾
- åœ¨æ–‡ä»¶ä¾§è¾¹æ åº•éƒ¨æ·»åŠ å›ºå®šä¿¡æ¯åŒºåŸŸ
- æ˜¾ç¤ºç‰ˆæœ¬å·ã€Sloganã€å¿«æ·é“¾æ¥
- æ”¯æŒå…³äºå¼¹çª—

### è®¾è®¡ç›®æ ‡
- æœ€å°åŒ–ä»£ç æ”¹åŠ¨
- å¤ç”¨ç°æœ‰ç»„ä»¶å’Œæ ·å¼
- ç‰ˆæœ¬å·è‡ªåŠ¨ä» package.json è¯»å–

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FileSidebar ç»„ä»¶             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Header (å·¥ä½œåŒº + æ–°å»º)        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  Search (æœç´¢æ¡†)               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  FileList (æ–‡ä»¶åˆ—è¡¨ï¼Œå¯æ»šåŠ¨)   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  SidebarFooter (åº•éƒ¨ä¿¡æ¯) â˜…æ–°å¢ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ ç‚¹å‡»å…³äº
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AboutModal (å…³äºå¼¹çª—) â˜…æ–°å¢   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶åˆ’åˆ†

| ç»„ä»¶ | ç±»å‹ | æ–‡ä»¶ä½ç½® |
|------|------|----------|
| FileSidebar | ä¿®æ”¹ | `components/Sidebar/FileSidebar.tsx` |
| SidebarFooter | æ–°å¢ | `components/Sidebar/SidebarFooter/` |
| AboutModal | æ–°å¢ | `components/Sidebar/SidebarFooter/AboutModal.tsx` |

---

## ğŸ“¦ æŠ€æœ¯é€‰å‹

### æ–°å¢ä¾èµ–
æ— éœ€æ–°å¢ä¾èµ–

### å¤ç”¨ç°æœ‰
- `lucide-react` - å›¾æ ‡
- `react-hot-toast` - é“¾æ¥å¤åˆ¶æç¤ºï¼ˆå¯é€‰ï¼‰

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### ç‰ˆæœ¬å·è·å–

```typescript
// ä» package.json è¯»å–ç‰ˆæœ¬å·
// æ–¹æ¡ˆ1ï¼šæ„å»ºæ—¶æ³¨å…¥ï¼ˆæ¨èï¼‰
// åœ¨ vite.config.ts ä¸­å®šä¹‰
define: {
  APP_VERSION: JSON.stringify(process.env.npm_package_version)
}

// æ–¹æ¡ˆ2ï¼šè¿è¡Œæ—¶è¯»å–ï¼ˆå¤‡é€‰ï¼‰
// ä½¿ç”¨ import.meta.url æˆ–åŠ¨æ€å¯¼å…¥
```

### ç»„ä»¶é€šä¿¡

```mermaid
graph TD
    A[FileSidebar] --> B[ä¼ é€’ version]
    B --> C[SidebarFooter]
    C --> D{ç”¨æˆ·æ“ä½œ}
    D -->|ç‚¹å‡»é“¾æ¥| E[window.open]
    D -->|ç‚¹å‡»å…³äº| F[æ˜¾ç¤º AboutModal]
    F --> G[createPortal]
```

---

## ğŸ¨ ç»„ä»¶è®¾è®¡

### æ–‡ä»¶ç»“æ„

```
components/Sidebar/
â”œâ”€â”€ FileSidebar.tsx          # ä¿®æ”¹ï¼šæ·»åŠ åº•éƒ¨ç»„ä»¶
â”œâ”€â”€ FileSidebar.css          # ä¿®æ”¹ï¼šæ·»åŠ æ ·å¼
â””â”€â”€ SidebarFooter/           # æ–°å¢ç›®å½•
    â”œâ”€â”€ index.tsx
    â”œâ”€â”€ SidebarFooter.tsx    # åº•éƒ¨ä¿¡æ¯ç»„ä»¶
    â”œâ”€â”€ AboutModal.tsx       # å…³äºå¼¹çª—ç»„ä»¶
    â””â”€â”€ styles.css
```

### SidebarFooter ç»„ä»¶

```typescript
// components/Sidebar/SidebarFooter/SidebarFooter.tsx

interface SidebarFooterProps {
  version: string;
}

export function SidebarFooter({ version }: SidebarFooterProps) {
  const [showAbout, setShowAbout] = useState(false);

  const links = {
    website: 'https://weimd.gudong.site/',
    github: 'https://github.com/tenngoxars/WeMD',
  };

  return (
    <>
      <footer className="fs-footer">
        <div className="fs-footer-brand">
          <Smartphone size={16} />
          <span className="fs-footer-name">WeMD</span>
        </div>
        <div className="fs-footer-version">v{version}</div>
        <div className="fs-footer-slogan">
          Markdown å†™ä½œï¼Œä¸€é”®åˆ°å…¬ä¼—å·
        </div>
        <div className="fs-footer-links">
          <a
            href={links.website}
            target="_blank"
            rel="noopener noreferrer"
            className="fs-footer-link"
          >
            <Globe size={14} /> å®˜ç½‘
          </a>
          <a
            href={links.github}
            target="_blank"
            rel="noopener noreferrer"
            className="fs-footer-link"
          >
            <Github size={14} /> GitHub
          </a>
          <button
            onClick={() => setShowAbout(true)}
            className="fs-footer-link"
          >
            <Info size={14} /> å…³äº
          </button>
        </div>
      </footer>

      {showAbout && (
        <AboutModal
          isOpen={showAbout}
          onClose={() => setShowAbout(false)}
          version={version}
        />
      )}
    </>
  );
}
```

### AboutModal ç»„ä»¶

```typescript
// components/Sidebar/SidebarFooter/AboutModal.tsx

interface AboutModalProps {
  isOpen: boolean;
  onClose: () => void;
  version: string;
}

export function AboutModal({ isOpen, onClose, version }: AboutModalProps) {
  if (!isOpen) return null;

  return createPortal(
    <div className="modal-overlay" onClick={onClose}>
      <div className="about-modal" onClick={(e) => e.stopPropagation()}>
        <button className="modal-close" onClick={onClose}>
          <X size={18} />
        </button>

        <div className="about-logo">
          <img src="/favicon-dark.svg" alt="WeMD" />
        </div>

        <h2 className="about-title">WeMD</h2>
        <p className="about-version">v{version}</p>

        <p className="about-slogan">
          Markdown å†™ä½œï¼Œä¸€é”®åˆ°å…¬ä¼—å·
        </p>

        <div className="about-description">
          <p>
            WeMD æ˜¯ä¸“ä¸ºå¾®ä¿¡å…¬ä¼—å·è®¾è®¡çš„ Markdown ç¼–è¾‘å™¨ï¼Œ
            æœ¬åœ°ä¼˜å…ˆï¼Œè®©åˆ›ä½œæ›´è‡ªç”±ã€‚
          </p>
        </div>

        <div className="about-links">
          <a href="https://weimd.gudong.site/" target="_blank" rel="noopener noreferrer">
            <Globe size={16} /> å®˜ç½‘
          </a>
          <a href="https://github.com/tenngoxars/WeMD" target="_blank" rel="noopener noreferrer">
            <Github size={16} /> GitHub
          </a>
          <a href="https://weimd.gudong.site/docs" target="_blank" rel="noopener noreferrer">
            <BookOpen size={16} /> æ–‡æ¡£
          </a>
        </div>
      </div>
    </div>,
    document.body
  );
}
```

### FileSidebar ä¿®æ”¹

```typescript
// components/Sidebar/FileSidebar.tsx

// æ·»åŠ å¯¼å…¥
import { SidebarFooter } from './SidebarFooter';

// åœ¨è¿”å›çš„ JSX ä¸­ï¼Œ</aside> å‰æ·»åŠ 
return (
  <aside className="file-sidebar">
    {/* ... ç°æœ‰å†…å®¹ ... */}

    {/* æ–°å¢åº•éƒ¨ä¿¡æ¯ */}
    <SidebarFooter version={APP_VERSION} />
  </aside>
);
```

---

## âš™ï¸ é…ç½®å˜æ›´

### Vite é…ç½®ä¿®æ”¹

```typescript
// apps/web/vite.config.ts

export default defineConfig({
  // ... ç°æœ‰é…ç½®
  define: {
    // ä» package.json è¯»å–ç‰ˆæœ¬å·
    APP_VERSION: JSON.stringify(process.env.npm_package_version),
  },
});
```

### ç±»å‹å£°æ˜

```typescript
// apps/web/src/vite-env.d.ts

interface ImportMetaEnv {
  readonly APP_VERSION: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- [ ] SidebarFooter æ¸²æŸ“æ­£ç¡®
- [ ] ç‰ˆæœ¬å·æ­£ç¡®æ˜¾ç¤º
- [ ] é“¾æ¥ href æ­£ç¡®

### é›†æˆæµ‹è¯•
- [ ] ç‚¹å‡»å…³äºå¼¹çª—æ‰“å¼€/å…³é—­
- [ ] ç‚¹å‡»é“¾æ¥åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€

### è§†è§‰æµ‹è¯•
- [ ] äº®è‰²æ¨¡å¼æ ·å¼æ­£ç¡®
- [ ] æ·±è‰²æ¨¡å¼æ ·å¼æ­£ç¡®
- [ ] å“åº”å¼å¸ƒå±€æ­£ç¡®

---

## ğŸš€ å®æ–½è®¡åˆ’

| ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡å·¥æ—¶ |
|------|--------|----------|
| 1. ä¿®æ”¹ Vite é…ç½®æ³¨å…¥ç‰ˆæœ¬å· | @name | 0.5h |
| 2. åˆ›å»º SidebarFooter ç»„ä»¶ | @name | 1h |
| 3. åˆ›å»º AboutModal ç»„ä»¶ | @name | 1h |
| 4. ä¿®æ”¹ FileSidebar é›†æˆ | @name | 0.5h |
| 5. ç¼–å†™ CSS æ ·å¼ | @name | 1h |
| 6. æµ‹è¯•ä¸è°ƒä¼˜ | @name | 0.5h |

**æ€»è®¡**: çº¦ 4.5 å°æ—¶

---

## âš ï¸ é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|----------|
| package.json ç‰ˆæœ¬å·è¯»å–å¤±è´¥ | ç‰ˆæœ¬æ˜¾ç¤ºä¸º undefined | æ·»åŠ é»˜è®¤å€¼ '1.0.0' |
| æ·±è‰²æ¨¡å¼æ ·å¼é€‚é…é—®é¢˜ | æ·±è‰²æ¨¡å¼ä¸‹æ˜¾ç¤ºå¼‚å¸¸ | ä½¿ç”¨ CSS å˜é‡ç¡®ä¿å…¼å®¹ |
| å¼¹çª—å±‚çº§è¢«é®æŒ¡ | å¼¹çª—æ— æ³•æ˜¾ç¤º | ä½¿ç”¨ createPortal åˆ° body |

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [PRD æ–‡æ¡£](./prd.md)
- [UI è®¾è®¡](./ui-design.md)
- [ç°æœ‰ä¾§è¾¹æ ç»„ä»¶](../../../../../apps/web/src/components/Sidebar/FileSidebar.tsx)
- [Vite ç¯å¢ƒå˜é‡](https://vitejs.dev/guide/env-and-mode.html)

---

## ğŸ“ å˜æ›´è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 2024-01-13 | 1.0 | åˆå§‹ç‰ˆæœ¬ | @Claude |
