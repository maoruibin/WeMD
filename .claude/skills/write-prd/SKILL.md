---
name: write-prd
description: 编写产品需求文档（PRD）。扮演产品经理角色，根据功能描述或现有功能目录，编写或更新 PRD 文档。会读取角色提示词 templates/roles/01-pm.md 和相关产品文档（vision.md、values.md、persona.md），确保输出符合项目规范。
---

# 编写 PRD (产品需求文档)

扮演产品经理角色，编写或更新 PRD 文档。

## 触发方式

```
/write-prd 图片拖拽上传
/write-prd feat-002
```

## 执行步骤

### 1. 确定目标功能

如果用户提供的是功能名称（如"图片拖拽上传"）：
- 查找对应的功能目录
- 如果不存在，提示用户先使用 `/new-feature` 创建

如果用户提供的是功能编号（如 feat-002）：
- 直接定位到功能目录

### 2. 加载上下文

读取以下文件以获取上下文：

```
templates/roles/01-pm.md          # 角色提示词
docs/01-product/vision.md         # 产品愿景
docs/01-product/values.md         # 产品价值观
docs/01-product/persona.md        # 用户画像
features/{功能目录}/01-product/prd.md  # 现有 PRD（如果存在）
```

### 3. 收集需求信息

如果 PRD 不存在或为空，询问用户：

```
请提供以下信息帮助编写 PRD：

1. 用户痛点：这个功能解决什么问题？
2. 目标用户：主要给谁用？
3. 核心功能：具体要做什么？
4. 验收标准：怎么判断做好了？

（可以简短描述，我会整理成完整 PRD）
```

### 4. 编写 PRD

扮演产品经理角色，编写完整的 PRD 文档，包含：

- 📋 元信息（编号、日期、优先级、版本）
- 🎯 背景与目标
- 📖 功能描述（用户故事、核心功能点）
- 🎨 交互流程
- ✅ 验收标准
- 📊 数据埋点

### 5. 输出文档

将编写好的 PRD 写入 `features/{功能目录}/01-product/prd.md`

### 6. 更新进度

更新功能 README.md 中的进度跟踪。

## 输出示例

```
✅ PRD 已编写完成

文件：docs/versions/v1.2.0/features/feat-002-侧边栏底部信息/01-product/prd.md

下一步：
- /write-design - 继续 UI 设计
- /write-tech - 或直接写技术设计
```

## 注意事项

- 保持简洁，不啰嗦
- 用户故事格式："**作为** [角色] **我想要** [功能] **以便于** [价值]"
- 验收标准必须可测试
- 考虑边界情况（空状态、错误状态）
